<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Commande réussie - Sihem</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
    html, body {
        height: 100%;
        margin: 0;
        font-family: 'Arial', sans-serif;
        background: linear-gradient(to bottom, #fff8f5, #ffe7df);
        color: #333;
    }

    h1 {
        font-family: "Georgia", serif;
        font-weight: bold;
        color: #ff6f61;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }

    .wrapper {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
    }

    .content {
        flex: 1;
        padding: 40px 20px;
        max-width: 900px;
        margin: auto;
    }

    table {
        background-color: #fff;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        min-width: 600px;
    }

    th {
        background-color: #ffcabf;
        font-weight: 600;
    }

    th, td {
        text-align: center;
        vertical-align: middle !important;
    }

    .btn-success {
        border-radius: 12px;
        padding: 12px 25px;
        font-size: 1.1rem;
        font-weight: 500;
        transition: transform 0.2s;
    }

    .btn-success:hover {
        transform: translateY(-2px);
    }

    footer {
        background-color: #ff6f61;
        color: #fff;
        padding: 20px 0;
        text-align: center;
    }

    /* ✅ Mobile */
    @media (max-width: 768px) {

        h1 {
            font-size: 1.8rem;
        }

        .table-responsive {
            border-radius: 12px;
            overflow-x: auto;
        }

        table {
            min-width: 550px;
        }

        .btn-success {
            width: 100%;
        }
    }
</style>
</head>

<body>

<div class="wrapper">
    <div class="content">
        <h1 class="mb-4 text-center">✅ Merci pour votre commande!</h1>

        <p class="text-center fs-5">Votre commande #{{ order.id }} a été passée avec succès.</p>
        <p class="text-center fs-6">Email: {{ order.customer_email }} | Téléphone: {{ order.customer_phone }}</p>
        <p class="text-center fs-6">Adresse: {{ order.customer_address }}</p>

        <h3 class="mt-4 mb-3">Résumé de la commande</h3>

        <div class="table-responsive">
            <table class="table table-bordered align-middle">
                <thead>
                    <tr>
                        <th>Produit</th>
                        <th>Quantité</th>
                        <th>Prix unitaire</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in order.items.all %}
                    <tr>
                        <td>{{ item.product.title }}</td>
                        <td>{{ item.quantity }}</td>
                        <td>{{ item.price }} DT</td>
                        <td>{{ item.quantity|floatformat:0|add:"0"|floatformat:0|add:"0" }} * {{ item.price }} = {{ item.quantity|floatformat:0|add:"0"|floatformat:0|add:"0" |floatformat:0 }}{{ item.price }} DT</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <h3 class="text-end mt-3 fw-bold">Total général: <span class="text-danger">{{ order.total_price }} DT</span></h3>

        <div class="text-center mt-4">
            <a href="{% url 'product_list' %}" class="btn btn-success">⬅ Retour aux produits</a>
        </div>
    </div>

    <footer>
        &copy; 2025 Sihem. Tous droits réservés.
    </footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
